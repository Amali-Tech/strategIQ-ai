{
  "openapi": "3.0.0",
  "info": {
    "title": "Cultural Intelligence API",
    "description": "Provides cultural market intelligence and content adaptation services using Bedrock Knowledge Bases. Analyzes cultural contexts, market preferences, and generates localized content recommendations for global campaigns.",
    "version": "1.0.0"
  },
  "paths": {
    "/cultural-insights": {
      "post": {
        "summary": "Get cultural insights for campaign adaptation",
        "description": "Queries cultural intelligence knowledge bases to provide guidelines and recommendations for adapting campaigns across different cultural markets. Results are stored in DynamoDB for campaign tracking.",
        "operationId": "get_cultural_insights",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "product_id": {
                    "type": "string",
                    "description": "Unique identifier for the product/campaign"
                  },
                  "user_id": {
                    "type": "string",
                    "description": "User identifier for data ownership",
                    "default": "anonymous"
                  },
                  "target_markets": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    },
                    "description": "List of target markets/countries for analysis"
                  },
                  "campaign_type": {
                    "type": "string",
                    "description": "Type of campaign (e.g., 'marketing', 'advertising', 'social')",
                    "default": "general"
                  },
                  "product_category": {
                    "type": "string",
                    "description": "Category of the product being promoted"
                  }
                },
                "required": ["product_id", "target_markets"]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Cultural insights retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "product_id": {
                          "type": "string",
                          "description": "Product identifier"
                        },
                        "user_id": {
                          "type": "string",
                          "description": "User identifier"
                        },
                        "target_markets": {
                          "type": "array",
                          "items": { "type": "string" },
                          "description": "Markets analyzed"
                        },
                        "cultural_guidelines": {
                          "type": "array",
                          "description": "Cultural adaptation guidelines",
                          "items": {
                            "type": "object",
                            "properties": {
                              "guideline": { "type": "string" },
                              "priority": {
                                "type": "string",
                                "enum": ["high", "medium", "low"]
                              },
                              "rationale": { "type": "string" }
                            }
                          }
                        },
                        "adaptation_recommendations": {
                          "type": "array",
                          "description": "Market-specific adaptation recommendations",
                          "items": {
                            "type": "object",
                            "properties": {
                              "market": { "type": "string" },
                              "recommendations": {
                                "type": "array",
                                "items": { "type": "string" }
                              },
                              "priority": { "type": "string" }
                            }
                          }
                        },
                        "cultural_considerations": {
                          "type": "array",
                          "description": "Key cultural considerations",
                          "items": { "type": "string" }
                        },
                        "storage_location": {
                          "type": "string",
                          "description": "DynamoDB storage location"
                        },
                        "timestamp": {
                          "type": "string",
                          "description": "Analysis timestamp"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad request - missing required parameters or analysis failed",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "error": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/market-intelligence": {
      "post": {
        "summary": "Get market-specific intelligence",
        "description": "Retrieves detailed market intelligence for a specific target market, including demographic data, cultural preferences, platform preferences, and seasonal considerations. Data is stored in DynamoDB for future reference.",
        "operationId": "get_market_intelligence",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "product_id": {
                    "type": "string",
                    "description": "Unique identifier for the product/campaign"
                  },
                  "user_id": {
                    "type": "string",
                    "description": "User identifier for data ownership",
                    "default": "anonymous"
                  },
                  "target_market": {
                    "type": "string",
                    "description": "Single target market/country for detailed analysis"
                  },
                  "intelligence_type": {
                    "type": "string",
                    "description": "Type of intelligence needed",
                    "enum": [
                      "general",
                      "demographic",
                      "cultural",
                      "platform",
                      "seasonal"
                    ],
                    "default": "general"
                  },
                  "focus_areas": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    },
                    "description": "Specific areas to focus the intelligence gathering"
                  }
                },
                "required": ["product_id", "target_market"]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Market intelligence retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "product_id": {
                          "type": "string",
                          "description": "Product identifier"
                        },
                        "user_id": {
                          "type": "string",
                          "description": "User identifier"
                        },
                        "target_market": {
                          "type": "string",
                          "description": "Market analyzed"
                        },
                        "market_insights": {
                          "type": "array",
                          "description": "Structured market insights",
                          "items": {
                            "type": "object",
                            "properties": {
                              "insight": { "type": "string" },
                              "relevance": { "type": "number" },
                              "category": { "type": "string" }
                            }
                          }
                        },
                        "demographic_data": {
                          "type": "object",
                          "description": "Demographic information"
                        },
                        "cultural_preferences": {
                          "type": "array",
                          "description": "Cultural preferences and values",
                          "items": { "type": "string" }
                        },
                        "platform_preferences": {
                          "type": "object",
                          "description": "Social media platform preferences",
                          "additionalProperties": { "type": "number" }
                        },
                        "seasonal_considerations": {
                          "type": "array",
                          "description": "Seasonal and holiday considerations",
                          "items": { "type": "string" }
                        },
                        "storage_location": {
                          "type": "string",
                          "description": "DynamoDB storage location"
                        },
                        "timestamp": {
                          "type": "string",
                          "description": "Analysis timestamp"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad request - missing required parameters or analysis failed",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "error": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/adapt-content": {
      "post": {
        "summary": "Adapt campaign content for multiple markets",
        "description": "Analyzes original campaign content and generates market-specific adaptations based on cultural intelligence and market preferences. Provides comprehensive adaptation recommendations across multiple target markets.",
        "operationId": "adapt_campaign_content",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "product_id": {
                    "type": "string",
                    "description": "Unique identifier for the product/campaign"
                  },
                  "user_id": {
                    "type": "string",
                    "description": "User identifier for data ownership",
                    "default": "anonymous"
                  },
                  "content": {
                    "type": "object",
                    "description": "Original campaign content to adapt",
                    "properties": {
                      "headline": { "type": "string" },
                      "body": { "type": "string" },
                      "images": {
                        "type": "array",
                        "items": { "type": "string" }
                      },
                      "call_to_action": { "type": "string" }
                    }
                  },
                  "target_markets": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    },
                    "description": "List of markets to adapt content for"
                  },
                  "content_type": {
                    "type": "string",
                    "description": "Type of content being adapted",
                    "enum": [
                      "social",
                      "advertising",
                      "email",
                      "website",
                      "video"
                    ],
                    "default": "general"
                  }
                },
                "required": ["product_id", "content", "target_markets"]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Content adaptation completed successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "product_id": {
                          "type": "string",
                          "description": "Product identifier"
                        },
                        "user_id": {
                          "type": "string",
                          "description": "User identifier"
                        },
                        "original_content": {
                          "type": "object",
                          "description": "The original content provided"
                        },
                        "target_markets": {
                          "type": "array",
                          "items": { "type": "string" },
                          "description": "Markets content was adapted for"
                        },
                        "market_adaptations": {
                          "type": "object",
                          "description": "Adaptations for each market",
                          "additionalProperties": {
                            "type": "object",
                            "properties": {
                              "cultural_adaptations": {
                                "type": "array",
                                "items": {
                                  "type": "object",
                                  "properties": {
                                    "adaptation_type": { "type": "string" },
                                    "description": { "type": "string" },
                                    "priority": { "type": "string" }
                                  }
                                }
                              },
                              "market_optimizations": {
                                "type": "array",
                                "items": {
                                  "type": "object",
                                  "properties": {
                                    "optimization_type": { "type": "string" },
                                    "description": { "type": "string" },
                                    "impact": { "type": "string" }
                                  }
                                }
                              },
                              "localization_requirements": {
                                "type": "array",
                                "items": { "type": "string" }
                              },
                              "risk_considerations": {
                                "type": "array",
                                "items": { "type": "string" }
                              },
                              "platform_adjustments": {
                                "type": "array",
                                "items": { "type": "string" }
                              }
                            }
                          }
                        },
                        "global_recommendations": {
                          "type": "array",
                          "description": "Cross-market recommendations",
                          "items": {
                            "type": "object",
                            "properties": {
                              "recommendation": { "type": "string" },
                              "rationale": { "type": "string" },
                              "priority": { "type": "string" }
                            }
                          }
                        },
                        "implementation_priority": {
                          "type": "array",
                          "description": "Ranked priority for implementing adaptations",
                          "items": {
                            "type": "object",
                            "properties": {
                              "market": { "type": "string" },
                              "priority_score": { "type": "integer" },
                              "urgency": { "type": "string" }
                            }
                          }
                        },
                        "storage_location": {
                          "type": "string",
                          "description": "DynamoDB storage location"
                        },
                        "timestamp": {
                          "type": "string",
                          "description": "Adaptation timestamp"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad request - missing required parameters or adaptation failed",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "error": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}
