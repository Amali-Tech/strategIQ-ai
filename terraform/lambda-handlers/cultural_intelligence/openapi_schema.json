{
  "openapi": "3.0.0",
  "info": {
    "title": "Cultural Intelligence API",
    "description": "Provides cultural market intelligence and content adaptation services. Analyzes cultural contexts, market preferences, and generates localized content recommendations for global campaigns. Updates existing product records in DynamoDB with cultural_status='culturally_enriched'. Compatible with Bedrock agent action groups.",
    "version": "2.0.1"
  },
  "paths": {
    "/analyze-cultural-insights": {
      "post": {
        "summary": "Analyze cultural insights for campaign adaptation",
        "description": "Analyzes cultural contexts and market preferences to provide guidelines and recommendations for adapting campaigns across different cultural markets. Updates an existing DynamoDB record (identified by product_id) with cultural_status='culturally_enriched' and market-specific insights.",
        "operationId": "analyze_cultural_insights",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "product_id": {
                    "type": "string",
                    "description": "Unique identifier for the product/campaign (must exist in DynamoDB products table as primary key)"
                  },
                  "target_markets": {
                    "type": "object",
                    "description": "JSON object containing target markets, e.g. { \"markets\": [\"North America\", \"Europe\", \"Asia\"] }",
                    "properties": {
                      "markets": {
                        "type": "array",
                        "items": {
                          "type": "string"
                        }
                      }
                    }
                  }
                },
                "required": ["product_id"]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Cultural insights retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "product_id": {
                      "type": "string",
                      "description": "The product identifier (same as request input)"
                    },
                    "cultural_status": {
                      "type": "string",
                      "example": "culturally_enriched",
                      "description": "Status flag indicating cultural analysis is complete"
                    },
                    "markets_analyzed": {
                      "type": "integer",
                      "description": "Number of markets analyzed"
                    },
                    "cultural_considerations_count": {
                      "type": "integer",
                      "description": "Total number of cultural considerations across all analyzed markets"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "ISO 8601 timestamp when cultural analysis was performed"
                    }
                  },
                  "required": [
                    "success",
                    "product_id",
                    "cultural_status",
                    "markets_analyzed",
                    "cultural_considerations_count",
                    "timestamp"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad request - missing required parameters or analysis failed",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "error": {
                      "type": "string",
                      "example": "product_id is required"
                    }
                  },
                  "required": ["success", "error"]
                }
              }
            }
          }
        }
      }
    },
    "/market-intelligence": {
      "post": {
        "summary": "Get market-specific intelligence",
        "description": "Retrieves detailed market intelligence for a specific target market, including cultural preferences, demographics, platform preferences, and seasonal insights.",
        "operationId": "get_market_intelligence",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "product_id": {
                    "type": "string",
                    "description": "Unique identifier for the product/campaign"
                  },
                  "user_id": {
                    "type": "string",
                    "description": "User identifier for data ownership",
                    "default": "anonymous"
                  },
                  "target_market": {
                    "type": "string",
                    "description": "Single target market/country for detailed analysis"
                  },
                  "intelligence_type": {
                    "type": "string",
                    "enum": [
                      "general",
                      "demographic",
                      "cultural",
                      "platform",
                      "seasonal"
                    ],
                    "default": "general"
                  },
                  "focus_areas": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    },
                    "description": "Specific areas to emphasize in intelligence gathering"
                  }
                },
                "required": ["product_id", "target_market"]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Market intelligence retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "product_id": { "type": "string" },
                        "target_market": { "type": "string" },
                        "market_insights": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "insight": { "type": "string" },
                              "relevance": { "type": "number" },
                              "category": { "type": "string" }
                            }
                          }
                        },
                        "demographic_data": { "type": "object" },
                        "cultural_preferences": {
                          "type": "array",
                          "items": { "type": "string" }
                        },
                        "platform_preferences": {
                          "type": "object",
                          "additionalProperties": { "type": "number" }
                        },
                        "seasonal_considerations": {
                          "type": "array",
                          "items": { "type": "string" }
                        },
                        "timestamp": { "type": "string" }
                      }
                    }
                  },
                  "required": ["success", "data"]
                }
              }
            }
          },
          "400": {
            "description": "Bad request - missing required parameters or analysis failed",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "error": { "type": "string" }
                  },
                  "required": ["success", "error"]
                }
              }
            }
          }
        }
      }
    },
    "/adapt-content": {
      "post": {
        "summary": "Adapt campaign content for multiple markets",
        "description": "Analyzes original campaign content and generates market-specific adaptations based on cultural intelligence and preferences. Returns localized content variations.",
        "operationId": "adapt_campaign_content",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "product_id": { "type": "string" },
                  "user_id": { "type": "string", "default": "anonymous" },
                  "content": {
                    "type": "object",
                    "properties": {
                      "headline": { "type": "string" },
                      "body": { "type": "string" },
                      "images": {
                        "type": "array",
                        "items": { "type": "string" }
                      },
                      "call_to_action": { "type": "string" }
                    }
                  },
                  "target_markets": {
                    "type": "array",
                    "items": { "type": "string" }
                  },
                  "content_type": {
                    "type": "string",
                    "enum": [
                      "social",
                      "advertising",
                      "email",
                      "website",
                      "video"
                    ],
                    "default": "general"
                  }
                },
                "required": ["product_id", "content", "target_markets"]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Content adaptation completed successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean", "example": true },
                    "data": {
                      "type": "object",
                      "properties": {
                        "product_id": { "type": "string" },
                        "user_id": { "type": "string" },
                        "target_markets": {
                          "type": "array",
                          "items": { "type": "string" }
                        },
                        "market_adaptations": {
                          "type": "object",
                          "additionalProperties": {
                            "type": "object",
                            "properties": {
                              "localized_headline": { "type": "string" },
                              "localized_body": { "type": "string" },
                              "recommended_colors": {
                                "type": "array",
                                "items": { "type": "string" }
                              },
                              "cultural_notes": {
                                "type": "array",
                                "items": { "type": "string" }
                              }
                            }
                          }
                        },
                        "timestamp": { "type": "string" }
                      }
                    }
                  },
                  "required": ["success", "data"]
                }
              }
            }
          },
          "400": {
            "description": "Bad request - missing required parameters or adaptation failed",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean", "example": false },
                    "error": { "type": "string" }
                  },
                  "required": ["success", "error"]
                }
              }
            }
          }
        }
      }
    }
  }
}
